#!/usr/bin/env bash
# This script installs Nginx (if not installed), then configures a 301 redirect from /redirect_me

# Install Nginx if it's not already installed
if ! command -v nginx &> /dev/null; then
    sudo apt-get update
    sudo apt-get install -y nginx
fi

# Add the 301 redirect to the Nginx configuration
REDIRECT_CONF="location /redirect_me {
    return 301 http://example.com;
}"

# Insert the redirection in the server block in the default Nginx config file
sudo sed -i '/server_name _;/a '"$REDIRECT_CONF" /etc/nginx/sites-available/default

# Reload Nginx to apply changes
sudo nginx -s reload
